<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Christmas Puzzle</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background: linear-gradient(135deg, #0f5132, #198754);
      color: white;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
      overflow: hidden;
    }

    .snowflake {
      position: fixed;
      top: -10px;
      color: white;
      user-select: none;
      pointer-events: none;
      animation: fall linear infinite;
      opacity: 0.8;
    }

    @keyframes fall { to { transform: translateY(110vh); } }

    .card {
      background: rgba(0,0,0,0.55);
      padding: 2rem;
      border-radius: 20px;
      width: 100%;
      max-width: 560px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
      position: relative;
      z-index: 2;
    }

    h1 { margin-bottom: 0.5rem; }
    p { line-height: 1.6; }

    .progress {
      height: 8px;
      background: rgba(255,255,255,0.2);
      border-radius: 6px;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ffc107, #ffdd57);
      transition: width 0.4s ease;
    }

    input {
      width: 100%;
      padding: 0.75rem;
      margin-top: 1rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
    }

    button {
      margin-top: 1rem;
      padding: 0.75rem 1.25rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      background: #ffc107;
      color: #000;
      font-weight: bold;
    }

    .error { color: #ffb3b3; margin-top: 0.75rem; }
    .success { color: #b6ffda; margin-top: 0.75rem; }

    .sparkle {
      position: fixed;
      pointer-events: none;
      font-size: 1.4rem;
      animation: sparkle 1.2s ease-out forwards;
    }

    @keyframes sparkle {
      from { opacity: 1; transform: scale(1) translateY(0); }
      to { opacity: 0; transform: scale(2) translateY(-60px); }
    }

    .music-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      background: rgba(255,255,255,0.15);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      color: white;
      font-size: 1.1rem;
      cursor: pointer;
    }

    .intro {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #0f5132, #198754);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .intro-card {
      background: rgba(0,0,0,0.6);
      padding: 2.5rem;
      border-radius: 22px;
      text-align: center;
      max-width: 480px;
    }

    .final { margin-top: 1.5rem; font-size: 1.05rem; }
  </style>
</head>
<body>

<div class="intro" id="intro">
  <div class="intro-card">
    <h1>üéÑ A Little Christmas Puzzle üéÑ</h1>
    <p>Ten questions. One surprise.</p>
    <p>I made this just for you ‚ù§Ô∏è</p>
    <button onclick="startGame()">I'm Ready ‚ú®</button>
  </div>
</div>

<div class="card">
  <button class="music-btn" onclick="toggleMusic()">üé∂</button>
  <div class="progress"><div class="progress-bar" id="progress"></div></div>
  <h1 id="title">Christmas Puzzle</h1>
  <p id="clue"></p>

  <input id="answer" type="text" placeholder="Enter answer" />
  <button onclick="checkAnswer()">Submit</button>

  <div id="message"></div>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/12/19/audio_2e1e7d3b50.mp3?filename=soft-christmas-ambient-12599.mp3" type="audio/mpeg">
</audio>

<script>
const stages = [
  { clue: "1Ô∏è‚É£ Which year was the Crying Child incident?", answer: "1983" },
  { clue: "2Ô∏è‚É£ Who is the prettiest Resident Evil character? (First name only)", answer: "leon" },
  { clue: "3Ô∏è‚É£ In Jujutsu Kaisen, Gojo is the strongest sorcerer because of which technique?", answer: "limitless" },
  { clue: "4Ô∏è‚É£ In Bleach, what is the name of Ichigo Kurosaki‚Äôs Zanpakut≈ç?", answer: "zangetsu" },
  { clue: "5Ô∏è‚É£ In Gravity Falls, Bill Cipher‚Äôs ultimate evil plan is called what?", answer: "weirdmageddon" },
  { clue: "6Ô∏è‚É£ In Death Note, Light and L play what game against each other in college?", answer: "tennis" },
  { clue: "7Ô∏è‚É£ What is the name of the serial murder case L worked on previously with Ray Penber‚Äôs fianc√©e?", answer: "bb murder case" },
  { clue: "8Ô∏è‚É£ Which Demon Slayer character originally said: BURN! BURN! SET YOUR HEART ABLAZE! (Last name only)", answer: "rengoku" },
  { clue: "9Ô∏è‚É£ In Jujutsu Kaisen, what color are Gojo‚Äôs eyes when revealed?", answer: "blue" },
  { clue: "üîü In Bryce's opinion, what is the scariest FNAF game? (Just the number)", answer: "4", final: true }
];

let stage = 0;

function normalize(text) {
  return text.toLowerCase().trim().replace(/\s+/g, ' ');
}

function startGame() {
  document.getElementById('intro').style.display = 'none';
  updateUI();
}

function updateUI() {
  const data = stages[stage];
  document.getElementById('clue').innerText = data.clue;
  document.getElementById('progress').style.width = (stage / stages.length) * 100 + '%';
}

function checkAnswer() {
  const input = document.getElementById('answer');
  const message = document.getElementById('message');

  if (normalize(input.value) === stages[stage].answer) {
    sparkle();
    message.innerHTML = '<div class="success">Correct ‚ú®</div>';
    input.value = '';
    stage++;

    if (stage >= stages.length || stages[stage - 1].final) {
      document.getElementById('title').innerText = 'üéâ Congrats, You Won! üéâ';
      document.getElementById('progress').style.width = '100%';
      input.style.display = 'none';
      document.getElementById('clue').innerHTML = `
        <div class="final">
          <p><strong>I love you, you are the world to me, and even though we aren't spending Christmas day together, always know there isn't a second that goes by where I'm not thinking about you.</strong></p>
          <p>You will always be <em>"My better 50%"</em> ‚Äî (that's an Outer Wilds reference üí´)</p>
          <p><strong>I love you,</strong><br/>Bryce ‚ù§Ô∏è</p>
          <hr style="margin:1.5rem 0; opacity:0.4;" />
          <p><strong>Text me this phrase to unlock your gift:</strong></p>
          <p style="font-size:1.2rem; color:#ffc107;"><em>This song is new to me, but I'm glad to be a part of it.</em></p>
        </div>
      `;
      return;
    }

    updateUI();
  } else {
    message.innerHTML = '<div class="error">Not quite ‚Äî try again ‚ù§Ô∏è</div>';
  }
}

function sparkle() {
  for (let i = 0; i < 6; i++) {
    const s = document.createElement('div');
    s.className = 'sparkle';
    s.innerText = '‚ú®';
    s.style.left = Math.random() * 100 + 'vw';
    s.style.top = '60vh';
    document.body.appendChild(s);
    setTimeout(() => s.remove(), 1200);
  }
}

function toggleMusic() {
  const music = document.getElementById('music');
  music.paused ? music.play() : music.pause();
}

for (let i = 0; i < 40; i++) {
  const snow = document.createElement('div');
  snow.className = 'snowflake';
  snow.innerText = '‚ùÑ';
  snow.style.left = Math.random() * 100 + 'vw';
  snow.style.animationDuration = 5 + Math.random() * 5 + 's';
  snow.style.fontSize = 10 + Math.random() * 20 + 'px';
  document.body.appendChild(snow);
}
</script>
</body>
</html>
